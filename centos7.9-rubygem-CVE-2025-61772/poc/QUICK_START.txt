CVE-2025-61772 PoC - Quick Start Guide
======================================

AUTOMATED TEST (Recommended)
----------------------------
cd poc
./test.sh

This will:
1. Build Docker containers (vulnerable & patched)
2. Run exploits against both versions
3. Display results with color-coded output
4. Cleanup containers

Expected: Vulnerable fails, Patched blocks attacks


MANUAL DOCKER TEST
------------------
cd poc

# Build containers
docker build -f Dockerfile.vulnerable -t rack-vulnerable .
docker build -f Dockerfile.patched -t rack-patched .

# Test vulnerable version
docker run -d -p 9292:9292 --name vuln rack-vulnerable
ruby exploit.rb http://localhost:9292/upload
# Expected: HTTP 200 (VULNERABLE)
docker stop vuln && docker rm vuln

# Test patched version
docker run -d -p 9292:9292 --name patched rack-patched
ruby exploit.rb http://localhost:9292/upload
# Expected: HTTP 400 (PROTECTED)
docker stop patched && docker rm patched


LOCAL TEST (Without Docker)
----------------------------
cd poc

# Test vulnerable
gem install rack -v 2.0.9.0
ruby vulnerable_app.rb &
APP_PID=$!
sleep 2
ruby exploit.rb http://localhost:9292/upload
kill $APP_PID

# Test patched
gem install ../rack-2.0.9.1-complete-fix.gem
ruby vulnerable_app.rb &
APP_PID=$!
sleep 2
ruby exploit.rb http://localhost:9292/upload
kill $APP_PID


UNDERSTANDING RESULTS
---------------------
Vulnerable System:
  Attack 1: HTTP 200 ❌ (accepts large boundary data)
  Attack 2: HTTP 200 ❌ (accepts large MIME header)

Patched System:
  Attack 1: HTTP 400 ✅ ("boundary not found within limit")
  Attack 2: HTTP 400 ✅ ("mime part header too large")


TROUBLESHOOTING
---------------
Q: Port 9292 in use?
A: Change port in vulnerable_app.rb or kill existing process

Q: Docker build fails?
A: Ensure rack-2.0.9.1-complete-fix.gem exists in parent directory

Q: Ruby not found?
A: Install Ruby 2.7+ from https://www.ruby-lang.org/

Q: test.sh fails?
A: Check Docker is running: docker ps


FILES IN THIS DIRECTORY
-----------------------
exploit.rb           - Attack simulation script
vulnerable_app.rb    - Test target application
test.sh             - Automated test suite
Dockerfile.vulnerable - Unpatched Rack 2.0.9.0
Dockerfile.patched   - Patched Rack 2.0.9.1
README.md           - Detailed documentation
QUICK_START.txt     - This file


SECURITY NOTE
-------------
⚠️  Only test systems you own/control
⚠️  Do not use against production systems
⚠️  This is for security research and validation only


For detailed documentation, see README.md
